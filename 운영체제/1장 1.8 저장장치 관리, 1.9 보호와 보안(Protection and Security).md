## 1.8 저장장치 관리

- 운영체제는 저장장치의 물리적 특성을 추상화하여 논리적인 저장 단위인 **파일**을 정의한다.
- 운영체제는 파일을 물리적 매체로 사상하며, 저장장치를 통해 파일에 접근한다.

### 파일 시스템 관리

- 파일관리는 운영체제의 구성요소 중 하나이다.
- 컴퓨터는 여러 타입의 물리적 매체에 정보를 저장할 수 있다.
- 파일은 생성자에 의해 정의된 관련 정보의 집합체이다.
- 일반적으로 파일은 프로그램(소스와 목적 프로그램 형태)과 데이터를 나타낸다.
- 데이터 파일은 숫자, 영문자, 영숫자 등으로 구성된다.
- 파일은 텍스트파일과 같은 자유 형태이거나 엄격하게 포맷된 형태(ex고정된 필드)일 수있다.
- 파일은 비트, 바이트, 줄, 레코드들의 연속으로 구성되며 파일 생성자에 의해 의미가 정의된다.
- 운영체제는 대량 저장매체와 그것을 제어하는 장치를 관리함으로 파일의 추상적 개념을 구현한다
- 파일은 쉽게 사용하기 위해 통상 디렉터리들로 구성된다.

> 운영체제는 파일 관리를 위하여 다음과 같은 일을 담당한다.
> - 파일의 생성 및 제거
> - 디렉터리 생성 및 제거
> - 파일과 디렉터리를 조작하기 위한 프리미티브의 제공
> - 파일을 보조 저장장치로 맵핑
> - 안정적인(비휘발성) 저장매체에 파일을 백업

### 대용량 저장장치 관리

- 컴퓨터 시스템은 주 메모리 내용을 저장하기 위해 보조 저장장치를 제공해야 한다.
- 현대의 컴퓨터 시스템은 디스크를 프로그램과 데이터를 위한 저장매체로 사용하고 있다.
- 대부분의 프로그램은 주 메모리에 적재될 때까지 디스크에 저장되며 데이터의 출발지와 목적지로 디스크를 사용하고 있다.

> 운영체제는 디스크 관리를 위하여 다음과 같은 기능을 담당한다.
> - 자유 공간(free-space)의 관리
> - 저장 장소 할당
> - 디스크 스케줄링

- 컴퓨터의 동작 속도는 디스크 서브시스템과 그것을 조작하는 알고리즘의 속도에 의해 결정될 수있다.
- 보조 저장장치보다 더 느리고 적은 비용이지만 용량이 큰 장치를 사용하는 경우도 많다.
  ex)디스크 데이터의 백업, 데이터 및 장기간 보존이 필요한 데이터를 저장하는등
- 테이프나 광 플래터와 같은 미디어들은 WORM(Write-Once, Read-Many-times)와 RW(Read-Write)형식 사이에 다양하게 제공된다.
- 3차 저장장치는 시스템 성능에 중요하지 않지만 운영체제에 의해 관리되어야한다.
- 운영체제가 제공해야 할 기능에는 마운트와 언마운트 기능, 프로세스의 배타적 사용을 위한 장치의 할당과 반환 그리고 보조 저장장치로부터 3차 저장장치로의 데이터 이주 등이 포함된다.

### 캐싱(caching)

- **캐싱**은 컴퓨터 시스템의 중요한 원리이다.
- 정보는 통상 저장장치에 보관된다.
- 정보가 사용됨에 따라 보다 빠른 장치인 캐시에 일시적으로 복사된다.
- 캐시에 정보가 없다면 주 메모리 시스템으로부터 정보를 가져와 사용해야 하며 이때 이 정보가 다음에 곧 다시 사용될 확률이 높다는 가정 하에 캐시에 넣는다.
- 인덱스 레지스터와 같은 CPU 내부의 프로그램 가능한 레지스터들은 주 메모리를 위한 고속의 캐시로 볼 수 있다.
- 캐시의 크기에 한계가 있기 때문에 캐시 관리가 설계의 중요한 문제가 된다.
- 주 메모리는 보조 메모리를 위한 빠른 캐시로 볼 수 있는데 이는 보조 메모리의 데이터를 사용하기 위해서는 주 메모리에 복사되어야 하고 안전하게 보관하기 위해 보조 메모리로 이동되기 전에 데이터는 반드시 주 메모리에 있어야 하기 때문이다.
- 파일 시스템 데이터는 저장장치 계층의 여러 단계에 존재할 수 있다.
- 최상위 단계에서는 운영체제가 주 메모리 안에 파일 시스템 데이터의 캐시를 유지시킬 수 있다.
- 파일 시스템 인터페이스를 통해 액세스되는 고속의 휘발성 저장장치로 전자적 RAM 디스크를 사용할 수 있다. 
- 보조 저장장치의 대부분은 자기디스크에 있다.
- 자기디스크 저장장치는 다시 하드디스크 손상 시 데이터의 손실을 막기 위해서 테이프 또는 이동 가능한 디스크에 백업한다.
- 저장장치의 계층구조에서 각 수준간의 전보 이동은 하드웨어 설계나 제어하는 운영체제에 따라 명시적 또는 묵시적으로 이루어진다.
- 메모리의 계층 구조에서 동일한 데이터가 동시에 서로 다른 수준의 저장장치 시스템에 나타나게 된다.
- 여러개의 프로세스가 데이터에 접근하기를 원할 경우 각 프로세스가 가장 최근에 갱신된 데이터의 값을 얻는 것을 보장하기 위해서는 매우 주의를 기울일 필요가 있다.
- CPU가 내부 레지스터를 유지할 뿐만 아니라 로컬 캐시도 갖고 있는 다중처리기 환경 하에서는 더욱 복잡해진다.
- 여러개의 CPU가 모두 동시에 실행됭수 있으므로 한 캐시에 있는 값이 갱신될 경우 그 값이 존재하는 모든 캐시에 즉각적으로 반영되어야 한다. 이러한 상황을 **캐시 일관성 문제**라고 하며 이는 일반적으로 하드웨어적 문제이다.
- 분산 환경에서는 동일한 파일의 여러 복사본이 공간적을 분산된 여러 컴퓨터에 유지될 수 있다.
- 여러 개의 복사본이 병렬로 접근되고 갱신될 수 있으므로 한 장소에서 한 복사본이 갱신될 경우 가능한 빨리 모든 복사본이 갱신될 것을 보장해야한다.

### 입출력 시스템(I/O-Systems)

- 운영체제의 목적  중의 하나는 사용자에게 특정 하드웨어 장치의 특성을 숨기는 것이다.

> 입출력 시스템은 다음과 같이 구성되어 있다.
> - 버퍼링, 캐싱, 스풀링을 포함한 메모리 관리 구성요소
> - 일반적인 장치 드라이버 인터페이스
> - 특정 하드웨어 장치들을 위한 드라이버

- 오직 장치 드라이버만이 자신에게 지정된 특정 장치의 특성을 알고 있다.

## 1.9 보호와 보안(Protection and Security)

- 다수의 사용자를 가지며 여러 프로세스의 병렬 실행을 허용한다면 데이터에 대한 접근이 규제되어야 한다.
- 파일, 메모리 세그먼트, CPU  및 자원들에 대해 운영체제로부터 허가를 획득한 프로세스만 작업가능한 기법이 필요하다.
- **보호**(protection)란 컴퓨터 시스템이 정의한 자원에 대해 프로그램, 프로세스, 사용자들의 접근을 제어하는 기법이다.
- 이 기법은 시행될 제어를 명시하고 이 제어를 강제 시행하기 위한 방법을 제공해야 한다.
- *보호는 구성요소 서브시스템 간의 인터페이스에서 잠재적인 오류를 검출함으로써 시스템의 신뢰성을 증가시킬 수 있다.**
- 인터페이스 오류를 초기에 발견하면 고장난 서브시스템에 의해 정상적인 서브시스템이 오염되는 것을 방지할 수 있다.
- 보호되지 않는 자원은 권한이 없거나 무자격사용자에 의해 사용되는 것을 방지할 수 없다.
- 보호 지향 시스템은 허가받은 사용과 않은 사용을 구별하는 방법을 제공한다.
- 외부 또는 내부의 공격을 방어하는 것이 **보안 기능**이다
- 공격은 시스템의 넓은 범위에 대해 가능하고 바이러스, 웜, 서비스 거부공격(시스템의 자원을 전부 소모함으로써 다른 사용자들이 시스템에 접근할 수 없게 만듦), 식별자 도용, 시스템 도용 등이 있다.
- 보호와 보안을 제공하기 위해서는 시스템의 모든 사용자들을 구분할 수 있어야 한다.
- 대부분의 운영체제들은 사용자 이름과 연관된 **사용자 식별자(user IDs)**의 리스트를 유지한다.
- Windows NT의 용어로는 **보안 식별자(SID, security ID)** 라고 한다.
- 이 식별자는 사용자마다 할당되고 시스템에서 유일한 값을 가진다
- 각 사용자가 아닌 사용자의 집합의 구분을 위한 그룹  기능은 시스템 전체에 존재하는 그룹 이름과 그룹 식별자의 리스트로 구현될 수 있다.
- 때때로 원하는 작업을 실행하기 위해선 특권을 얻어야 할 때가 있다.
- 프로세스는 종료되거나 특권을 해제하기 전까지 유효 사용자 식별자를 이용하여 실행된다.