
### 컴퓨터 시스템 구조(computer system architecture)

#### 단일처리기 시스템(single processor systems)

 - 단일처리기 시스템은 PDA로부터 메인프레임에 이르기까지 범위가 넓기 때문에 다양한 처리기를 사용한다.
 - 사용자 프로세스의 명령어를 포함하여 범용 명령어 집합을 실행할 수 있는 하나의 주 CPU를 가진다.
 - 운영체제는 처리기들과 통신할수 없으며 처리기들은 독립적으로 자신의 작업을 처리한다.
 - 전용 처리기의 사용은 일반적인 형태이며 그렇다고 단일 처리기 시스템을 다중처리기 시스템으로 변환하지는 않는다. 범용 처리기 CPU가 하나 있는 시스템은 단일처리기 시스템이다.

#### 다중처리기 시스템(multiprocessor systems)

- 단일 처리기 시스템이 일반적이나 다중처리기 시스템(병렬 시스템 또는 강결합 시스템)은 중요하다.
- 밀접한 통신을 하는 하나 이상의 처리기들을 가지며 컴퓨터 버스, 클록, 그리고 메모리와 주변장치를 공유한다.

> 다중처리기 장점
> 1. **증가된 처리량** : 처리기 수를 증가시켜 짧은 시간동안 많은 일을 실행한다. 하지만 N개의 처리기를 사용할 경우 속도 증가율이 N배가 되지 않고 N보다 작다. 모든 부분이 동작하기위해 약간의 오버헤드가 유발된다. 이 오버헤드와 공유 자원에 대한 경쟁이 더해져 추가 처리기에 의해 예상되는 이득을 떨어뜨린다.
> 2. **규모의 경제** : 여러개의 단일 시스템에 비해 비용을 절약할 수 있다. 이는 처리기가 주변장치, 대용량 저장장치, 전원 공급 장치를 공유하고 있기 때문. 만약 여러 프로그램이 동일한 데이터 집합에 대해 연산한다면 하나의 디스크에 데이터를 저장하고 모든 처리기가 이들을 공유하게 하는 것이 여러 컴퓨터가 각자 자신의 로컬 디스크와 많은 데이터의 복사본을 갖는것보다 비용이 저렴하다.
> 3. **증가된 신뢰성** : 여러 개의 처리기에 기능이 분산된다면 한 처리기가 고장나더라도 시스템이 정지하지않고 속도만 느려진다. 10개의 처리기중 1개가 고장나면 90%의 속도로 실행된다.

- 컴퓨터의 시스템의 증가된 신뢰성은 많은 응용프로그램에서 필수이다. 이렇게 살아남은 하드웨어의 수준에 비례해 계속적인 서비스를 제공하는 능력을 **우아한 퇴보(graceful degradation)** 라고 한다.
- 하나의 구성요소의 고장에도 동작을 계속하는 우아한 퇴보를 넘어 **결함 허용**적이라 불린다.
- 결함 허용 시스템은 오류를 탐지하고, 진단하고, 가능하다면 교정할 수 있게 하는 기법이 필요하다

> 현재 사용되고 있는 다중처리기 시스템은 두가지 형태를 가진다.
> - 각 처리기에 특정 태스크가 할당되는 **비대칭적 다중처리(asymmetric multiprocessing)** 사용, 하나의 주 처리기가 시스템을 제어한다.
> - 다른 처리기들은 주 처리기의 명령을 실행하거나 미리 정의된 태스크를 실행한다.
> - 이러한 기법은 주-종 관계를 정의한다. 
> - 주 처리기는 작업을 스케줄하고 종속 처리기에 작업을 할당한다.

> - 가장 일반적인 다중처리기 시스템은 각 처리기가 운영체제 내의 모든 작업을 실행하는 **대칭적 다중처리기(symmetric multiprocressing)** 를 사용한다.
> - 대칭적 다중처리(SMP)는 모든 처리기가 대등하다는 것을 의미한다.
> - 처리기 간에는 주-종 관계가 없다.
> - 각 처리기는 자신 고유의 레지스터 집합과 사적인 또는 지역적인 캐시를 가지고 있다.
> - 그러나 모든 처리기는 물리메모리를 공유하고 있다.

- 대칭적 다중처리기와 비대칭적 다중처리기의 차이점은 하드웨어나 소프트웨어로부터 기인한다.
- 특수한 하드웨어가 다중처리기들을 차별화 할 수 있으며, 또는 한 개의 주 처리기와 다수의 종 처리기를 허용하도록 소프트웨어를 설계할 수도 있다.
- 다중처리는 계산 능력을 증대시키기 위하여 CPU를 추가한다. 만일 CPU가 통합된 메모리 제어기를 가지고 있다면 CPU를 추가함으로써 시스템의 접근 가능한 메모리의 양도 증가시킨다.
- 다중처리기는 메모리 접근 모델을 일정한 **메모리 접근(UMA)** 에서 **차등 메모리 접근(NUMA)** 형태로 변경할 수 있다.  
- UMA는 모든 CPU가 RAM을 접근하는데 걸리는 시간이 같은 경우로 정의된다
- NUMA는 메모리의 일부분에 접근하는데 걸리는 시간이 다른 부분에 접근하는 데 걸리는 시간보다 길어지게 되며 성능에 불이익을 받게 된다. 운영체제는 자원 관리를 통하여 NUMA의 성능 불이익을 최소화할 수 있다.

#### 클러스터형 시스템(Clustered Systems)

- 여러 CPU를 가진 시스템의 또 다른 유형은 클러스터형 시스템이다.
- 다중처리기 시스템과 마찬가지로 클러스터 시스템은 여러 개의 CPU들이 함께 계산 작업을 실행한다.
- 클러스터 시스템은 둘 이상의 독자적 시스템 또는 노드들을 결합하여 구성한다는 점에서 전형적인 다중처리기 시스템과 차이가 난다.
- 일반적인 클러스터 컴퓨터는 저장장치를 공유하고 근거리 통신망(Local Area Network)으로 연결 된다.
- 클러스터링은 통상 높은 가용도(availability)를 제공하기 위해 사용된다. 즉 클러스터 내 하나 이상의 컴퓨터 시스템이 고장나더라도 서비스는 계속 제공된다.

> [!note]  BEOWULF 클러스터
> Beowulf 클러스터는 고성능 계산 작업을 해결하기 위해 설계된다.
> 이 클러스터는 개인용 컴퓨터와 같은 사용 하드웨어를 간단히 LAN으로 연결하여 구현된다.
> 계산 노드 간에 통신을 위한 오픈소스 소프트웨어 라이브러리 집합으로만 구성된다.
> Beowulf 클러스터가 특정 하드웨어를 요구하지 않고 자유롭게 사용 가능한 오픈소스 소프트웨어를 사용하여 동작하기 때문에 고성능 계산 클러스터를 구현하기 위한 저비용 전략을 제공한다.

- 클러스터링은 비대칭적 또는 대칭적으로 구성될 수 있다.
- 비대칭적 클러스터링에 서는 다른 컴퓨터들이 응용 프로그램을 실행시키는 동안 한 컴퓨터는 긴급 대기(hot standby) 모드 상태를 유지한다. 이 긴급 대기모드의 호스트는 활성 서버들을 감시하는 작업만을 실행한다.
- 서버가 고장 난다면 긴급 대기 모드의 호스트가 활성 서버가 된다.
- 대칭형 모드에서는 둘 이상의 호스트들이 응용 프로그램을 실행시키고 서로를 감시한다.
- 가용한 하드웨어를 모두 사용하기 때문에 대칭형 구성이 더 효율적이다.
- 대칭형 구성이 효율적으로 동작하기 위해서는 하나 이상의 응용 프로그램들이 실행 가능해야 한다.
- 클러스터가 네트워크로 연결된 여러 개의 컴퓨터 시스템으로 구성되기 때문에 클러스터는 고성능 계산(higt performance computing) 환경을 제공하는데 이용될 수 있다.
- 이러한 시스템들은 응용 프로그램을 클러스터의 모든 컴퓨터에서 동시에 실행시킬 수 있기 때문에 단일처리기 또는 SMP 시스템에 비해 현저히 나은 계산 능력을 제공할 수 있다.
- 그러나 응용 프로그램이 클러스터의 이점을 활용하도록 **병렬화(parallelization)** 라는 기법을 사용하여 특별하게 작성되어야 한다.
- 병렬화는 클러스터의 개별 컴퓨터에서 병렬적으로 실행될 수 있는 구성요소 단위로 응용 프로그램을 나눈다.
- 이러한 응용 프로그램들은 클러스터의 각 계산 노드가 문제의 해당 부분을 해결한 후 모든 노드의 결과를 통합하여 최종 해결책을 생성하도록 설계된다.
- 다른 형태의 클러스터로 **병렬(parallel) 클러스터**와 **WAN을 이용한 클러스터링**이 있다.
- 병렬 클러스터는 여러 호스트에 의한 동시 접근을 지원하지 않으므로 병렬 클러스터는 특수 소프트웨어 버전과 특별한 릴리즈의 응용에 의해 달성된다.
